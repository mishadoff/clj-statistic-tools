#include <iostream>
#include <set>
#include <map>
using namespace std;
typedef long long ll;
set<ll> s;
map<ll, int> cnt;
ll m[400000];
void insert(ll num){
    if (cnt[num]==0)
        s.erase(num);
    cnt[num]++;
}
void remove(ll num){
    cnt[num]--;
    if (cnt[num]==0)
        s.insert(num);
}
ll poll(){
    return *s.begin();
}
void clear(){
    s.clear();
    cnt.clear();
    for (int i=0;i<300000;++i)
        s.insert(i);
}
int main(){
    int tnum;cin>>tnum;
    int tcou=0;
    while (tnum--){
        ll n, k;
        cin>>n>>k;
        clear();
        ll a, b, c, r;
        cin>>a>>b>>c>>r;
        m[0]=a;
        for (int i=1;i<k;++i)
            m[i] = (b*m[i-1] + c)%r;
        for (int i=0;i<k;++i)
            insert(m[i]);
        for (int i=k;i<k+k+k+12;++i){
            m[i] = poll();
            insert(m[i]);
            remove(m[i-k]);
        }
        --n;
        if (n>k+1)
            n = (n-(k+1))%(k+1)+(k+1);
        cout<<"Case #"<<++tcou<<": "<<m[n]<<endl;
    }
    return 0;
}
