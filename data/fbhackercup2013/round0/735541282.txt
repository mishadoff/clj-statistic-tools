#include <iostream>
#include <string>
#include <map>
#include <vector>
#include <algorithm>
using namespace std;

map<string,bool> status;

bool doit(string s) {
	if(status.count(s)) return status[s];
	if(s=="") return 1;
	bool& ret = status[s];
	ret = false;
	if(s[0]>='a' && s[0]<='z') if(doit(s.substr(1))) return ret=true;
	if(s[0]==' ' || s[0]==':') if(doit(s.substr(1))) return ret=true;
	if(s[0]=='(' && s[s.size()-1]==')') if(doit(s.substr(1,s.size()-2))) return ret=true;
	for(int i=1; i<s.size(); i++) if(doit(s.substr(0,i)) && doit(s.substr(i,s.size()-i))) return ret=true;
	if(s.size()>=2 && (s.substr(0,2)==":)" || s.substr(0,2)==":(") && doit(s.substr(2))) return ret=true;
	return false;
}

int main(void) {
	int m;
	cin >> m;
	string s;
	getline(cin,s);
	for(int ts=1; ts<=m; ts++) {
		status.clear();
		cout << "Case #" << ts << ": ";
		getline(cin,s);
		cout << (doit(s)?"YES":"NO") << endl;
	}
}
